
/*!
 * valid - Javascript library to validate input fields in a form
 * v0.2.0
 * https://github.com/firstandthird/valid
 * copyright First + Third 2014
 * MIT License
*/
!function(){var a=this,b=function(a){var b,c,d,e,f,g=0;b=c=d=e=f=!1;var h,i,j="";for(h=0,i=a.length;i>h;h++)!b&&/[a-z]/.test(a)?(g+=26,b=!0):!c&&/[A-Z]/.test(a)?(g+=26,c=!0):!d&&/\d/.test(a)?(g+=10,d=!0):!e&&"!@#$%^&*()".indexOf(a)>-1?(g+=10,e=!0):!f&&"~`-_=+[]{}\\|;:'\",.<>?/".indexOf(a)>-1?(g+=22,f=!0):-1===j.indexOf(a)&&(g++,j+=a);return g},c=function(a){var b;if("object"==typeof a)for(b in a)c[b]||(c[b]=a[b]);return this};c.validate=function(a,b,c){var d={valid:!1,type:c||"validate"};return b instanceof RegExp?d.valid=b.test(a):"string"==typeof b?d.valid=b===a:"function"==typeof b&&(d.valid=b(a)),d},c.required=function(a){return c.validate(a,function(a){return a.length>0},"required")},c.email=function(a){return c.validate(a.toLowerCase(),/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/,"email")},c.password=function(a,b){return b=b||function(a){return a.length>5},c.validate(a,b,"password")},c.passwordConfirm=function(a,b){return c.validate(a,b,"password-confirm")},c.passwordStrength=function(a,c){if(!a.length)return 0;c=c||80;var d=a.length*Math.log(b(a))/Math.log(2),e=Math.round(100*d)/100;return e>c&&(e=c),~~(e/c*100)},"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=c),exports.validations=c):a.validations=c}(),function(a){a.declare("valid",{defaults:{errorClass:"valid-input-error",validClass:"valid-input-valid",inputTypes:["input","textarea","select"],preventDefault:!0},events:{submit:"check"},init:function(){var a,b={};if(this.results=[],this.supportedInputEvent=("oninput"in document.createElement("input")?"input":"keyup")+".valid","object"==typeof this.customValidators){for(a in this.customValidators)"inputTypes"!==a?b[a]||this[a]||(b[a]=this.customValidators[a],this[a]=this.customValidators[a]):this.inputTypes=this.customValidators[a];new validations(b)}this.bindEvents()},bindEvents:function(){var b=this,c=this.find(this.inputTypes.join());c.unbind(this.supportedInputEvent+" blur.valid"),c.bind(this.supportedInputEvent+" blur.valid",function(c){var d=a(this);a.each(d[0].attributes,function(e,f){var g="";if(0===f.name.indexOf("data-valid-")||"required"===f.name){g=a.camelCase(f.name.replace("data-valid-",""));var h;b[g]&&(h=b[g].call(b,d),h.element=d[0],h.valid?"blur"===c.type?b.emit("inputPass",[d,h]):b.emit("inputPassing",[d,h]):"blur"===c.type?b.emit("inputFail",[d,h]):b.emit("inputFailing",[d,h]))}})})},check:function(b){this.preventDefault&&b.preventDefault();var c=this;this.results=[],this.find(this.inputTypes.join()).each(function(){var b=a(this);a.each(this.attributes,function(d,e){var f="";if(0===e.name.indexOf("data-valid-")||"data-valid-required"===e.name){f=a.camelCase(e.name.replace("data-valid-",""));var g;c[f]&&(g=c[f].call(c,b),g.element=b[0],g.valid?(c.emit("inputValid",[g.element]),b.addClass(c.validClass).removeClass(c.errorClass)):(c.results.push(g),c.emit("inputInvalid",[g.element,g]),b.addClass(c.errorClass).removeClass(c.validClass)))}})}),this.results.length?this.emit("formInvalid",[this.el,this.results]):this.emit("formValid",[this.el])},validate:function(b,c){var d,e="";"object"==typeof b?(e=b.val(),d=b.data("valid-validate"),d&&d.length>0&&(pattern=d)):e=b;var f=a.makeArray(arguments);return f[0]=e,f.splice(1,1),"undefined"==typeof validations[c]?!1:validations[c].apply(this,f)},custom:function(a,b){return this.validate(a,"validate",b)},required:function(a){return this.validate(a,"required")},email:function(a){return this.validate(a,"email")},password:function(a,b){return this.validate(a,"password",b)},passwordConfirm:function(b,c){var d;return"object"==typeof b&&(d=b.data("valid-password-confirm"),d&&d.length>0&&(c=a("#"+d))),"object"==typeof c&&(c=c.val()),this.validate(b,"passwordConfirm",c)}})}(jQuery);